!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},r={},s=function(t,e){return{}.hasOwnProperty.call(t,e)},i=function(t,e){var r,s,i=[];r=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var n=0,o=r.length;o>n;n++)s=r[n],".."===s?i.pop():"."!==s&&""!==s&&i.push(s);return i.join("/")},n=function(t){return t.split("/").slice(0,-1).join("/")},o=function(e){return function(r){var s=n(e),o=i(s,r);return t.require(o,e)}},a=function(t,e){var s={id:t,exports:{}};return r[t]=s,e(s.exports,o(t),s),s.exports},c=function(t,n){var o=i(t,".");if(null==n&&(n="/"),s(r,o))return r[o].exports;if(s(e,o))return a(o,e[o]);var c=i(o,"./index");if(s(r,c))return r[c].exports;if(s(e,c))return a(c,e[c]);throw new Error('Cannot find module "'+t+'" from "'+n+'"')},p=function(t,r){if("object"==typeof t)for(var i in t)s(t,i)&&(e[i]=t[i]);else e[t]=r},h=function(){var t=[];for(var r in e)s(e,r)&&t.push(r);return t};t.require=c,t.require.define=p,t.require.register=p,t.require.list=h,t.require.brunch=!0}}(),require.register("config",function(t,e,r){r.exports={npm_config_save_dev:"",GREP_COLOR:"1;32",npm_config_viewer:"man",npm_config_browser:"",npm_package_gitHead:"48612e6ecf44bb770017fc29a32e48a3f395646b",npm_config_rollback:"true",rvm_bin_path:"/Users/tarkus/.rvm/bin",TERM_PROGRAM:"iTerm.app",NODE:"/usr/local/bin/node",npm_config_usage:"",npm_package_homepage:"https://github.com/tarkus/recore-admin-ui",GEM_HOME:"/Users/tarkus/.rvm/gems/ruby-1.9.3-p392",npm_config_globalignorefile:"/usr/local/etc/npmignore",npm_package_devDependencies_clean_css_brunch:">= 1.0 < 1.8",TERM:"screen-256color",SHELL:"/bin/bash",npm_config_shell:"/bin/bash",npm_config_init_author_url:"",RUBY_HEAP_FREE_MIN:"100000",CLICOLOR:"1",npm_config_shrinkwrap:"true",npm_config_parseable:"",IRBRC:"/Users/tarkus/.rvm/rubies/ruby-1.9.3-p392/.irbrc",TMPDIR:"/var/folders/hc/bc1x8p9d0s70r01qt4fbcsv40000gn/T/",npm_config_init_license:"ISC",npm_config_email:"tarkus.nnkh@gmail.com",Apple_PubSub_Socket_Render:"/tmp/launch-y45UZt/Render",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_git_tag_version:"true",npm_config_cert:"",MY_RUBY_HOME:"/Users/tarkus/.rvm/rubies/ruby-1.9.3-p392",npm_config_npat:"",npm_config_fetch_retries:"2",npm_config_registry:"https://registry.npmjs.org/",npm_package_repository_url:"git@github.com:tarkus/recore-admin-ui.git",npm_config_versions:"",npm_config_message:"%s",npm_config_key:"",npm_package_readmeFilename:"README.md",npm_package_devDependencies_css_brunch:">= 1.0 < 1.8",npm_package_description:"A web interface for RecoreAdmin",USER:"tarkus",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_always_auth:"",npm_package_devDependencies_jade_brunch:"^1.8.1",rvm_path:"/Users/tarkus/.rvm",npm_package_scripts_prepublish:"brunch build --production",TERMCAP:"SC|screen-256color|VT 100/ANSI X3.64 virtual terminal:\\\n	:DO=\\E[%dB:LE=\\E[%dD:RI=\\E[%dC:UP=\\E[%dA:bs:bt=\\E[Z:\\\n	:cd=\\E[J:ce=\\E[K:cl=\\E[H\\E[J:cm=\\E[%i%d;%dH:ct=\\E[3g:\\\n	:do=^J:nd=\\E[C:pt:rc=\\E8:rs=\\Ec:sc=\\E7:st=\\EH:up=\\EM:\\\n	:le=^H:bl=^G:cr=^M:it#8:ho=\\E[H:nw=\\EE:ta=^I:is=\\E)0:\\\n	:li#34:co#120:am:xn:xv:LP:sr=\\EM:al=\\E[L:AL=\\E[%dL:\\\n	:cs=\\E[%i%d;%dr:dl=\\E[M:DL=\\E[%dM:dc=\\E[P:DC=\\E[%dP:\\\n	:im=\\E[4h:ei=\\E[4l:mi:IC=\\E[%d@:ks=\\E[?1h\\E=:\\\n	:ke=\\E[?1l\\E>:vi=\\E[?25l:ve=\\E[34h\\E[?25h:vs=\\E[34l:\\\n	:ti=\\E[?1049h:te=\\E[?1049l:us=\\E[4m:ue=\\E[24m:so=\\E[3m:\\\n	:se=\\E[23m:mb=\\E[5m:md=\\E[1m:mr=\\E[7m:me=\\E[m:ms:\\\n	:Co#8:pa#64:AF=\\E[3%dm:AB=\\E[4%dm:op=\\E[39;49m:AX:\\\n	:vb=\\Eg:G0:as=\\E(0:ae=\\E(B:\\\n	:ac=\\140\\140aaffggjjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}}~~..--++,,hhII00:\\\n	:po=\\E[5i:pf=\\E[4i:k0=\\E[10~:k1=\\EOP:k2=\\EOQ:k3=\\EOR:\\\n	:k4=\\EOS:k5=\\E[15~:F3=\\E[1;2P:F4=\\E[1;2Q:F5=\\E[1;2R:\\\n	:F6=\\E[1;2S:F7=\\E[15;2~:F8=\\E[17;2~:F9=\\E[18;2~:\\\n	:FA=\\E[19;2~:kb=^H:K2=\\EOE:kB=\\E[Z:kF=\\E[1;2B:\\\n	:kR=\\E[1;2A:*4=\\E[3;2~:*7=\\E[1;2F:#2=\\E[1;2H:#3=\\E[2;2~:\\\n	:#4=\\E[1;2D:%c=\\E[6;2~:%e=\\E[5;2~:%i=\\E[1;2C:kh=\\E[1~:\\\n	:@1=\\E[1~:kH=\\E[4~:@7=\\E[4~:kN=\\E[6~:kP=\\E[5~:kI=\\E[2~:\\\n	:kD=\\E[3~:ku=\\EOA:kd=\\EOB:kr=\\EOC:kl=\\EOD:km:",SSH_AUTH_SOCK:"/tmp/launch-7dN2dV/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0:0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_cache_lock_retries:"10",npm_package_author_name:"Tarkus Liu",npm_config_heading:"npm",npm_config_proprietary_attribs:"true",npm_config_fetch_retry_mintimeout:"10000",npm_package_devDependencies_javascript_brunch:">= 1.0 < 1.8",rvm_prefix:"/Users/tarkus",npm_config_json:"",npm_config_argv:'{"remain":[],"cooked":["publish"],"original":["publish"]}',__CHECKFIX1436934:"1",PATH:"/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/Users/tarkus/Code/recore-admin-ui/node_modules/.bin:/usr/local/bin:/usr/local/bin:/usr/local/share/npm/bin:/usr/local/heroku/bin:/Applications/Postgres.app/Contents/MacOS/bin:/Users/tarkus/.bin:/usr/local/sbin:/usr/local/bin:/Users/tarkus/.rvm/gems/ruby-1.9.3-p392/bin:/Users/tarkus/.rvm/gems/ruby-1.9.3-p392@global/bin:/Users/tarkus/.rvm/rubies/ruby-1.9.3-p392/bin:/Users/tarkus/.rvm/bin:/usr/local/bin:/usr/local/share/npm/bin:/usr/local/heroku/bin:/Applications/Postgres.app/Contents/MacOS/bin:/Users/tarkus/.bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin:/Users/tarkus/.rvm/bin",STY:"320.ttys000.atlas",RUBY_HEAP_MIN_SLOTS:"800000",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/tarkus/Code/recore-admin-ui/node_modules/.bin/brunch",npm_config_userconfig:"/Users/tarkus/.npmrc",npm_config_init_module:"/Users/tarkus/.npm-init.js",PWD:"/Users/tarkus/Code/recore-admin-ui",npm_config_user:"501",npm_config_node_version:"v0.10.26",npm_package_bugs_url:"https://github.com/tarkus/recore-admin-ui/issues",npm_package_devDependencies_auto_reload_brunch:">= 1.0 < 1.8",npm_lifecycle_event:"prepublish",EDITOR:"vi",npm_config_save:"",npm_config_editor:"vi",npm_package_repository_type:"git",npm_package_name:"recore-admin-ui",LANG:"en_US.UTF-8",npm_config_tag:"latest",npm_package_devDependencies_stylus_brunch:"^1.8.1",ITERM_PROFILE:"Default",npm_config_global:"",npm_package_scripts_start:"brunch watch --server",npm_config_optional:"true",npm_config_username:"tarkus",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_package_devDependencies_coffee_script_brunch:"^1.8.0",npm_config_depth:"Infinity",npm_config_searchsort:"name",npm_config_rebuild_bundle:"true",npm_package_version:"0.4.13",npm_config_unicode:"true",rvm_version:"1.20.13 (stable)",RUBY_HEAP_SLOTS_INCREMENT:"300000",SHLVL:"3",HOME:"/Users/tarkus",npm_config_fetch_retry_maxtimeout:"60000",npm_package_devDependencies_static_jade_brunch:"^1.7.0",npm_package_scripts_test:"brunch test",npm_config_strict_ssl:"true",npm_config_save_prefix:"^",npm_config_loglevel:"http",npm_config_ca:"",npm_package_devDependencies_uglify_js_brunch:">= 1.0 < 1.8",GREP_OPTIONS:"--color=auto",npm_config_save_exact:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_dev:"",npm_package_devDependencies_brunch:"^1.7.14",CFLAGS:"-arch x86_64",npm_config_version:"",npm_config_cache_lock_stale:"60000",npm_config_cache_min:"10",ITERM_SESSION_ID:"w0t0p0",npm_config_searchexclude:"",npm_config_cache:"/Users/tarkus/.npm",LOGNAME:"tarkus",npm_lifecycle_script:"brunch build --production",npm_config_color:"true",WINDOW:"3",npm_config_proxy:"",npm_package_devDependencies_jsenv_brunch:"^1.4.2",npm_package_author_email:"tarkus@tarkus.im",GEM_PATH:"/Users/tarkus/.rvm/gems/ruby-1.9.3-p392:/Users/tarkus/.rvm/gems/ruby-1.9.3-p392@global",npm_package_devDependencies_coffee_script:"^1.7.1",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/1.4.9 node/v0.10.26 darwin x64",RUBY_GC_MALLOC_LIMIT:"79000000",npm_config_cache_lock_wait:"10000",ARCHFLAGS:"-arch x86_64",npm_config_production:"",DISPLAY:"/tmp/launch-Z27JFl/org.macosforge.xquartz:0",npm_config_save_bundle:"",RUBY_HEAP_SLOTS_GROWTH_FACTOR:"1",npm_config_umask:"18",npm_config_init_author_name:"",npm_config_git:"git",RUBY_VERSION:"ruby-1.9.3-p392",SECURITYSESSIONID:"186a5",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/hc/bc1x8p9d0s70r01qt4fbcsv40000gn/T/",npm_config_onload_script:"",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",npm_config_link:""}}),require.register("initialize",function(t,e){var r,s,i,n,o,a,c,p,h,d,l={}.hasOwnProperty,u=function(t,e){function r(){this.constructor=t}for(var s in e)l.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=e("./routes/header"),i=e("./routes/footer"),h=e("./routes/sidebar"),r=e("./routes/dashboard"),p=e("./routes/schemas"),a=e("./routes/records"),s=e("./routes/finder"),o=e("./routes/loader"),Spine.Controller.include({template:function(t){return e("./views/"+t)||function(){}}}),d=function(t){function e(){null==this.el&&(this.el=$("<div id='page-wrapper'/>").addClass(this.className).appendTo($("#wrapper"))),this.footer=new i,this.footer.render(),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.className="stage",e.prototype.controllers={dashboard:r,records:a,schemas:p,finder:s,loader:o},e}(Spine.Stack),c=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.header=new n,this.sidebar=new h,this.append(this.header.render()),this.append(this.sidebar.render()),this.stage=new d,this.setStack(this.stage),this.stage.sidebar=this.sidebar,this.routes({"/finder":function(t){return function(){return t.stage.finder.active()}}(this),"/loader":function(t){return function(){return t.stage.loader.active()}}(this),"/schema/:name":function(t){return function(e){return t.stage.schemas.configure(e.name)}}(this),"/record/:name":function(t){return function(e){return t.stage.records.configure(e.name)}}(this),"/record/:name/page/:page":function(t){return function(e){return t.stage.records.configure(e.name,e.page)}}(this),"/record/:name/add":function(t){return function(e){return t.stage.records.add(e.name)}}(this),"/record/:name/view/:id":function(t){return function(e){return t.stage.records.view(e.name,e.id)}}(this),"/record/:name/edit/:id":function(t){return function(e){return t.stage.records.edit(e.name,e.id)}}(this),"/record/:name/delete/:id":function(t){return function(e){return t.stage.records["delete"](e.name,e.id)}}(this),"*any":function(t){return function(){return t.stage.dashboard.active()}}(this)})}return u(e,t),e.prototype.className="app",e}(Spine.Controller),$(function(){var t,e,r,s;$.ajaxSetup({cache:!1}),t=new c({el:$("#wrapper")}),Spine.Route.setup(),s=Spine.Models;for(r in s)e=s[r],e.url=""+base_uri+"/"+e.url;return window.init_socket=function(){return this.socket.on("task progress",function(t){var e;return(e=Spine.Models.Schema.findByAttribute("name",t.model))?e.trigger("progress",t):void 0})},window.App=t})}),require.register("models/record",function(t,e,r){var s,i={}.hasOwnProperty,n=function(t,e){function r(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.configure("Record","model","properties","total","range"),e.extend(Spine.Model.Ajax),e.extend(Spine.ModelParty),e.url="/record",e}(Spine.Model),r.exports=s}),require.register("models/schema",function(t,e,r){var s,i={}.hasOwnProperty,n=function(t,e){function r(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.configure("Schema","name","id_generator","properties","task","count"),e.extend(Spine.Model.Ajax),e.extend(Spine.ModelParty),e.url="/schema",e}(Spine.Model),r.exports=s}),require.register("models/widget",function(t,e,r){var s,i={}.hasOwnProperty,n=function(t,e){function r(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.configure("Widget","name","size","content","group"),e.extend(Spine.Model.Ajax),e.extend(Spine.ModelParty),e.url="/stats",e}(Spine.Model),r.exports=s}),require.register("routes/dashboard",function(t,e,r){var s,i,n,o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,c=function(t,e){function r(){this.constructor=t}for(var s in e)a.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=e("../models/widget"),i=e("./panel"),s=function(t){function e(){this.render=o(this.render,this),this.select_node=o(this.select_node,this),this.refresh=o(this.refresh,this),this.active=o(this.active,this),e.__super__.constructor.apply(this,arguments),this.columns=3,this.render(),n.bind("refresh",this.refresh)}return c(e,t),e.prototype.elements={".widgets":"widgets",".node-selection input":"node_input"},e.prototype.events={"click .node-selection .input-group-addon":"select_node"},e.prototype.active=function(){return"dashboard"!==this.stack.swap.scene?(this.stack.swap.scene="dashboard",n.deleteAll(),n.fetch({url:""+base_uri+"/stats"}),this.widgets.html(""),e.__super__.active.apply(this,arguments)):void 0},e.prototype.refresh=function(t){var e,r,s,n,o,a,c,p,h,d;for(n=t.length,r={},c=0,p=t.length;p>c;c++)a=t[c],a.group||(a.group="ungrouped"),null==a.size&&(a.size=1),null==r[h=a.group]&&(r[h]=$("<div/>").addClass("col-lg-"+Math.min(12,Math.floor(4*a.size)))),o=new i({size:a.size,title:a.name,content:a.content}),r[a.group].append(o.el);d=[];for(s in r)e=r[s],d.push(this.widgets.append(e));return d},e.prototype.select_node=function(){var t;return(t=this.node_input.val())?(n.deleteAll(),n.fetch({url:""+base_uri+"/stats?node="+encodeURIComponent(t)}),this.widgets.html("")):void 0},e.prototype.render=function(){return this.replace(this.template("dashboard")()),this},e}(Spine.Controller),r.exports=s}),require.register("routes/empty",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(t){this.text=null!=t?t:"No Data",this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render()}return o(e,t),e.prototype.render=function(){return this.replace(this.template("empty")({text:this.text})),this},e}(Spine.Controller),r.exports=s}),require.register("routes/finder",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(){this.render=i(this.render,this),this.submit=i(this.submit,this),e.__super__.constructor.apply(this,arguments),this.render()}return o(e,t),e.prototype.elements={"input[name='key']":"key_input",".result":"result"},e.prototype.events={"submit form":"submit"},e.prototype.submit=function(t){var e;return t.preventDefault(),this.result.html(""),e=this,$.ajax({url:""+base_uri+"/util/finder",type:"POST",data:{key:this.key_input.val()},success:function(t){return e.result.html("<pre><code>"+t+"</code></pre>")}})},e.prototype.render=function(){return this.replace(this.template("finder")()),this},e}(Spine.Controller),r.exports=s}),require.register("routes/flash",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(t,r,s){this.type=t,this.message=r,this.ttl=s,this.render=i(this.render,this),this.destroy=i(this.destroy,this),e.__super__.constructor.apply(this,arguments),this.render(),this.ttl<0||setTimeout(this.destroy,3e3)}return o(e,t),e.prototype.destroy=function(){return this.el.fadeOut("slow",function(t){return function(){return t.el.remove()}}(this))},e.prototype.render=function(){return this.replace(this.template("flash")({type:this.type,message:this.message})),$("body").append(this.el),this},e}(Spine.Controller),r.exports=s}),require.register("routes/footer",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(){return this.render=i(this.render,this),this.reload=i(this.reload,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="footer",e.prototype.reload=function(){return this.render()},e.prototype.render=function(){return this.html(this.template("footer")),this},e}(Spine.Controller),r.exports=s}),require.register("routes/header",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(){return this.render=i(this.render,this),this.reload=i(this.reload,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="header",e.prototype.reload=function(){return this.render()},e.prototype.render=function(){return this.html(this.template("header")({title:window.title,subtitle:window.subtitle})),this},e}(Spine.Controller),r.exports=s}),require.register("routes/loader",function(t,e,r){var s,i,n=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var s in e)o.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("../models/schema"),s=function(t){function e(){this.submit=n(this.submit,this),e.__super__.constructor.apply(this,arguments),this.render()}return a(e,t),e.prototype.elements={".select-model":"model_selection","input[name='key']":"key_input",".result":"result"},e.prototype.events={"submit form":"submit"},e.prototype.submit=function(t){var e,r;return t.preventDefault(),r=encodeURIComponent(this.model_selection.val()),e=this.key_input.val(),i.fetch({url:""+base_uri+"/util/loader?model="+r+"&key="+e})},e.prototype.render=function(){return this.replace(this.template("loader")()),this},e}(Spine.Controller),r.exports=s}),require.register("routes/pagination",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(t){var r,s,n,o,a,c,p,h;if(this.path=t.path,this.total=t.total,this.current=t.current,this.per_page=t.per_page,this.scope=t.scope,this.render=i(this.render,this),this.link=i(this.link,this),e.__super__.constructor.apply(this,arguments),null==this.scope&&(this.scope=5),null==this.per_page&&(this.per_page=30),null==this.path&&(this.path="#/"),this.links=[],this.current<1&&(this.current=1),this.current=parseInt(this.current),this.max=Math.ceil(this.total/this.per_page),!(this.max>1))return this.render();if(this.prev=this.current>1?""+this.path+"/page/"+(this.current-1):!1,this.next=this.current<this.max?""+this.path+"/page/"+(this.current+1):!1,this.max<=this.scope){for(o=c=1,h=this.scope;(h>=1?h>=c:c>=h)&&(this.links.push(this.link(o)),o!==this.max);o=h>=1?++c:--c);return this.render()}for(r=!1,s=!1,n=this.current-Math.floor(this.scope/2),1>n&&(n=1),a=Math.min(n+this.scope-1,this.max),n>1&&this.links.push(this.link(1)),n>2&&this.links.push(this.link("...")),a<this.max&&(r=!0),a<this.max-1&&(s=!0),o=p=n;a>=n?a>=p:p>=a;o=a>=n?++p:--p)this.links.push(this.link(o));s&&this.links.push(this.link("...")),r&&this.links.push(this.link(this.max)),this.render()}return o(e,t),e.prototype.link=function(t){var e;return e={text:t},isNaN(t)||(e.href=""+this.path+"/page/"+t),e},e.prototype.render=function(){return this.replace(this.template("pagination")({max:this.max,prev:this.prev,next:this.next,links:this.links,current:this.current})),this},e}(Spine.Controller),r.exports=s}),require.register("routes/panel",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(t){this.title=t.title,this.content=t.content,this.size=t.size,this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),null==this.size&&(this.size=1),this.render()}return o(e,t),e.prototype.render=function(){return this.replace(this.template("panel")({size:this.size,title:this.title,content:this.content})),this},e}(Spine.Controller),r.exports=s}),require.register("routes/record_add",function(t,e,r){var s,i,n=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var s in e)o.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=e("../models/record"),i=function(t){function e(t){this.schema=t.schema,this.record=t.record,this.modal=t.modal,this.render=n(this.render,this),this.submit=n(this.submit,this),this.saved=n(this.saved,this),this.error=n(this.error,this),e.__super__.constructor.apply(this,arguments),null==this.record&&(this.record=new s),this.render(),this.record.bind("ajaxError",this.error),this.record.bind("ajaxSuccess",this.saved),this.modal.find(".modal-title").html("Adding new "+this.schema.name),this.modal.find(".btn-default").css("display","inline-block").html("Cancel"),this.modal.find(".btn-primary").css("display","inline-block").html("Save"),this.modal.find(".modal-body").html(this.el),this.modal.data("action","create"),this.modal.modal("show")}return a(e,t),e.prototype.elements={form:"form",".alert-danger":"form_error",".input-group.date":"date"},e.prototype.error=function(t,e,r,s){var i,n,o,a,c,p;if(400===e.status){i=t.report_error(e.responseJSON);for(o in i)for(n=i[o],a=this.form.find(".field-group-"+o),a.addClass("has-error"),c=0,p=n.length;p>c;c++)s=n[c],this.form_error.append($("<p/>").html("<strong>"+o+"</strong> "+s));return this.form_error.css("display","block"),i.length>0?this.modal.scrollTop(0):void 0}},e.prototype.saved=function(){return this.modal.modal("hide"),this.navigate("/record/"+this.schema.name+"/page/"+this.stack.records.page)},e.prototype.submit=function(){var t,e,r,s,i;for(e=this.form.serializeArray(),r={},s=0,i=e.length;i>s;s++)t=e[s],r[t.name]=t.value;return this.record.updateAttributes({model:this.schema.name,properties:r},{url:""+base_uri+"/record/"+this.schema.name})},e.prototype.render=function(){return this.replace(this.template("record_add")({record:this.record,schema:this.schema})),this.date.datepicker(),this},e}(Spine.Controller),r.exports=i}),require.register("routes/record_delete",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function r(t){this.record=t.record,this.schema=t.schema,this.modal=t.modal,this.render=i(this.render,this),this.destroy=i(this.destroy,this),this.submit=i(this.submit,this),r.__super__.constructor.apply(this,arguments),this.render(),this.record.bind("change",this.destroy),this.modal.find(".modal-title").html("Deleting "+this.schema.name.toLowerCase()+" #"+this.record.id),this.modal.find(".btn-default").css("display","inline-block").html("Cancel"),this.modal.find(".btn-primary").css("display","inline-block").html("Confirm"),this.modal.find(".modal-body").html(this.el),this.modal.data("action","delete"),this.modal.modal("show")}return o(r,t),r.prototype.submit=function(){return this.record.destroy({url:""+base_uri+"/record/"+this.record.model+"/"+this.record.id})},r.prototype.destroy=function(){var t,r;if(this.record.destroyed)return this.navigate("/record/"+this.schema.name+"/page/"+this.stack.records.page),$(".modal").modal("hide"),t=e("./flash"),r=new t("info",""+this.schema.name+" id #"+this.record.id+" has been successfully deleted")},r.prototype.render=function(){return this.replace(this.template("record_delete")({record:this.record,schema:this.schema})),this},r}(Spine.Controller),r.exports=s}),require.register("routes/record_edit",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function r(t){this.record=t.record,this.schema=t.schema,this.modal=t.modal,this.render=i(this.render,this),this.submit=i(this.submit,this),this.saved=i(this.saved,this),this.error=i(this.error,this),r.__super__.constructor.apply(this,arguments),this.render(),this.record.bind("ajaxError",this.error),this.record.bind("ajaxSuccess",this.saved),this.modal.find(".modal-title").html("Editing "+this.schema.name+" #"+this.record.id),this.modal.find(".btn-default").css("display","inline-block").html("Cancel"),this.modal.find(".btn-primary").css("display","inline-block").html("Save"),this.modal.find(".modal-body").html(this.el),this.modal.data("action","update"),this.modal.modal("show")}return o(r,t),r.prototype.elements={form:"form",".input-group.date":"date",".alert-danger":"form_error"},r.prototype.error=function(t,e,r,s){var i,n,o,a,c,p;if(400===e.status){i=t.report_error(e.responseJSON);for(o in i)for(n=i[o],a=this.form.find(".field-group-"+o),a.addClass("has-error"),c=0,p=n.length;p>c;c++)s=n[c],this.form_error.append($("<p/>").html("<strong>"+o+"</strong> "+s));return this.form_error.css("display","block"),i.length>0?this.modal.scrollTop(0):void 0}},r.prototype.saved=function(){var t,r;return $(".record-id.selected").removeClass("selected"),this.modal.modal("hide"),this.navigate("/record/"+this.schema.name+"/page/"+this.stack.records.page),t=e("./flash"),r=new t("success",""+this.schema.name+" id #"+this.record.id+" has been successfully saved")},r.prototype.submit=function(){var t,e,r,s,i;for(e=this.form.serializeArray(),r={},s=0,i=e.length;i>s;s++)t=e[s],r[t.name]=t.value;return this.record.updateAttributes({model:this.schema.name,properties:r},{url:""+base_uri+"/record/"+this.schema.name})},r.prototype.render=function(){return this.replace(this.template("record_edit")({record:this.record,schema:this.schema})),this.date.datepicker(),this},r}(Spine.Controller),r.exports=s}),require.register("routes/record_view",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(t){this.record=t.record,this.schema=t.schema,this.modal=t.modal,this.render=i(this.render,this),this.select=i(this.select,this),e.__super__.constructor.apply(this,arguments),this.render(),this.modal.find(".modal-title").html("Viewing "+this.schema.name.toLowerCase()+" #"+this.record.id),this.modal.find(".modal-body").html(this.el),this.modal.find(".btn-default").css("display","inline-block").html("Close"),this.modal.find(".btn-primary").css("display","none"),this.modal.modal("show"),this.modal.on("hide.bs.modal",function(t){return function(){return t.navigate("/record/"+t.schema.name+"/page/"+t.stack.records.page)}}(this))}return o(e,t),e.prototype.events={"click .field-value":"select"},e.prototype.select=function(t){return selectText(t.target)},e.prototype.render=function(){return this.replace(this.template("record_view")({record:this.record,schema:this.schema})),this},e}(Spine.Controller),r.exports=s}),require.register("routes/records",function(t,e,r){var s,i,n,o,a,c,p,h,d,l,u=function(t,e){return function(){return t.apply(e,arguments)}},_={}.hasOwnProperty,m=function(t,e){function r(){this.constructor=t}for(var s in e)_.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};l=e("../models/schema"),p=e("../models/record"),d=e("./row"),s=e("./empty"),i=e("./pagination"),o=e("./record_add"),h=e("./record_view"),c=e("./record_edit"),a=e("./record_delete"),n=function(t){function e(){this.render=u(this.render,this),this.sort=u(this.sort,this),this.selectValue=u(this.selectValue,this),this.deselectRow=u(this.deselectRow,this),this.selectRow=u(this.selectRow,this),this.detail=u(this.detail,this),this.submit=u(this.submit,this),this["delete"]=u(this["delete"],this),this.edit=u(this.edit,this),this.view=u(this.view,this),this.add=u(this.add,this),this.showDeleteModal=u(this.showDeleteModal,this),this.showEditModal=u(this.showEditModal,this),this.showViewModal=u(this.showViewModal,this),this.showAddModal=u(this.showAddModal,this),this.paginate=u(this.paginate,this),this.createRecords=u(this.createRecords,this),this.fetchRecords=u(this.fetchRecords,this),this.createSchemas=u(this.createSchemas,this),this.reload=u(this.reload,this),e.__super__.constructor.apply(this,arguments),this.render(),null==this.per_page&&(this.per_page=30),null==this.sort_field&&(this.sort_field="id"),null==this.sort_direction&&(this.sort_direction="DESC"),l.bind("refresh",this.createSchemas),p.bind("refresh",this.createRecords)}return m(e,t),e.prototype.elements={".page-header .title":"title",".modal.detail":"detail_modal",".modal.action":"action_modal",".panel-heading":"desc",".tables":"table_container",".table-records":"table_records",".table-records thead":"records_header",".table-records tbody":"records",".table-ids":"table_ids",".table-ids thead":"ids_header",".table-ids tbody":"ids",".pagination":"pagination",".btn.add":"btn_add",".btn.view":"btn_view",".btn.edit":"btn_edit",".btn.delete":"btn_delete"},e.prototype.events={"click .page-header button.reload":"reload","click .record-value":"detail","click .record-id":"selectRow","click .record-id.selected":"deselectRow","click .modal.detail .content":"selectValue","click .actions .add":"showAddModal","click .actions .view":"showViewModal","click .actions .edit":"showEditModal","click .actions .delete":"showDeleteModal","click .modal.action .btn-primary":"submit","click .sort":"sort"},e.prototype.reload=function(){return this.configure(this.model,this.page)},e.prototype.configure=function(t,e){return this.model=t,this.page=null!=e?e:1,this.stack.swap.scene="record",this.title.html(this.model),l.fetch({url:""+base_uri+"/schema/"+this.model}),this.desc.html("&nbsp;"),this.ids_header.html(""),this.records_header.html(""),this.ids.html(""),this.records.html(""),this.pagination.html(""),this.btn_add.css("display","none"),this.btn_view.css("display","none"),this.btn_edit.css("display","none"),this.btn_delete.css("display","none"),this.active()},e.prototype.createSchemas=function(t){return"record"===this.stack.swap.scene?(this.schema=t.pop(),this.fetchRecords()):void 0},e.prototype.fetchRecords=function(){return p.fetch({url:""+base_uri+"/record/"+this.model+"/page/"+this.page+"?per_page="+this.per_page+"&direction="+this.sort_direction})},e.prototype.createRecords=function(t){var e,r,i,n,o,a,c,p,h,l,u,_,m,f,g,y;
this.btn_add.css("display","inline-block"),this.ids_header.html("<tr><th>&nbsp;</th></tr>"),c=$("<tr/>"),a=t.length>0,y=this.schema.properties;for(p in y)m=y[p],a&&m.sortable?(_=$("<div/>").addClass("dropdown-toggle"),_.attr("data-toggle","dropdown"),_.attr("id","th-dropdown-"+p),_.html(p),_.append('<span class="caret"></span>'),r=$("<ul/>").addClass("dropdown-menu"),r.attr("role","menu"),r.append("<li><a class='sort' data-dir='ASC' data-field='"+p+"' href='javascript: void(0);'>Ascending</a></li>"),r.append("<li><a class='sort' data-dir='DESC' data-field='"+p+"' href='javascript: void(0);'>Descending</a></li>"),e=$("<div/>").addClass("dropdown"),e.append(_),e.append(r),u=$("<th/>").append(e),c.append(u)):c.append($("<th/>").html(p));if(this.records_header.html(c),0===t.length)return i=new s,this.records.html(i.el),this.ids.append("<tr><td class='record-id-none'>&nbsp;</td></tr>"),o=this.table_container.width(),this.table_records.width(o-this.table_ids.width()-2),void(this.action&&this[this.action](this.schema.name));for(n=t[0],this.paginate(n),null!=n.range&&this.desc.html("Showing "+n.range[0]+"-"+n.range[1]+" of "+n.total),f=0,g=t.length;g>f;f++)h=t[f],this.ids.append("<tr><td class='record-id' id='id-"+h.id+"'>"+h.id+"</td></tr>"),l=new d({record:h,schema:this.schema}),this.records.append(l.el);return o=this.table_container.width(),this.table_records.width(o-this.table_ids.width()-2),this.btn_view.addClass("disabled").css("display","inline-block"),this.btn_edit.addClass("disabled").css("display","inline-block"),this.btn_delete.addClass("disabled").css("display","inline-block"),this.action?this[this.action](this.schema.name):void 0},e.prototype.paginate=function(t){var e;return e=new i({total:t.total,current:this.page,per_page:this.per_page,path:"#/record/"+this.model}),this.pagination.html(e.el)},e.prototype.showAddModal=function(){return this.navigate("/record/"+this.schema.name+"/add")},e.prototype.showViewModal=function(){return this.navigate("/record/"+this.schema.name+"/view/"+this.selected_id)},e.prototype.showEditModal=function(){return this.navigate("/record/"+this.schema.name+"/edit/"+this.selected_id)},e.prototype.showDeleteModal=function(){return this.navigate("/record/"+this.schema.name+"/delete/"+this.selected_id)},e.prototype.add=function(t){return this.action=null,this.schema&&this.schema.name===t?(this.record=new p,this.action_handler=new o({record:this.record,schema:this.schema,modal:this.action_modal})):(this.action="add",this.configure(t))},e.prototype.view=function(t,e){var r;return this.action=null,null==this.selected_id&&(this.selected_id=e),this.record=p.find(this.selected_id),this.record?this.schema&&this.schema.name===t?this.action_handler=new h({record:this.record,schema:this.schema,modal:this.action_modal}):(this.action="view",r=Math.floor(this.selected_id/this.per_page)+1,this.configure(t,r)):this.navigate("/record/"+t)},e.prototype.edit=function(t,e){var r;return this.action=null,null==this.selected_id&&(this.selected_id=e),this.schema&&this.schema.name===t?(this.record=p.find(this.selected_id),this.action_handler=new c({record:this.record,schema:this.schema,modal:this.action_modal})):(this.action="edit",r=Math.floor(this.selected_id/this.per_page)+1,this.configure(t))},e.prototype["delete"]=function(t,e){var r;return this.action=null,null==this.selected_id&&(this.selected_id=e),this.record=p.find(this.selected_id),this.record?this.schema&&this.schema.name===t?this.action_handler=new a({record:this.record,schema:this.schema,modal:this.action_modal}):(this.action="delete",r=Math.floor(this.selected_id/this.per_page)+1,this.configure(t)):this.navigate("/record/"+t)},e.prototype.submit=function(){var t;return this.action_modal.find(".form-group.has-error").removeClass("has-error"),this.action_modal.find(".alert-danger").css("display","none").html(""),null!=(t=this.action_handler)&&"function"==typeof t.submit?t.submit():void 0},e.prototype.detail=function(t){var e;return t.preventDefault(),t.stopPropagation(),e=$(t.target),this.detail_modal.find(".modal-title").html(e.data("title")),this.detail_modal.find(".content").html(e.data("content")),this.detail_modal.modal("show")},e.prototype.selectRow=function(t){var e,r;return this.selected_id&&($("#id-"+this.selected_id).removeClass("selected"),$("#record-id-"+this.selected_id).removeClass("selected")),r=$(t.target),this.selected_id=e=r.html(),r.addClass("selected"),$("#record-id-"+e).addClass("selected"),this.btn_view.removeClass("disabled"),this.btn_edit.removeClass("disabled"),this.btn_delete.removeClass("disabled")},e.prototype.deselectRow=function(t){var e,r;return this.selected_id=null,r=$(t.target),e=r.html(),r.removeClass("selected"),$("#record-id-"+e).removeClass("selected"),this.btn_view.addClass("disabled"),this.btn_edit.addClass("disabled"),this.btn_delete.addClass("disabled")},e.prototype.selectValue=function(t){return selectText(t.target)},e.prototype.sort=function(t){var e;return e=$(t.target),this.sort_field=e.data("field"),this.sort_direction=e.data("dir"),this.configure(this.model)},e.prototype.render=function(){return this.replace(this.template("record_scene")({model:this.model})),this},e}(Spine.Controller),r.exports=n}),require.register("routes/row",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(t){this.record=t.record,this.schema=t.schema,this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render(),this.record.bind("save",this.render)}return o(e,t),e.prototype.render=function(){return this.replace(this.template("row")({record:this.record,schema:this.schema})),this},e}(Spine.Controller),r.exports=s}),require.register("routes/schema",function(t,e,r){var s,i,n=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var s in e)o.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("../models/schema"),s=function(t){function e(t){this.schema=t,this.render=n(this.render,this),this.task_dump=n(this.task_dump,this),this.task_pause=n(this.task_pause,this),this.task_stop=n(this.task_stop,this),this.task_resume=n(this.task_resume,this),this.remove_property=n(this.remove_property,this),this.remove_index=n(this.remove_index,this),this.create_index=n(this.create_index,this),this.select_field_to_create_index=n(this.select_field_to_create_index,this),this.enable_actions=n(this.enable_actions,this),this.disable_actions=n(this.disable_actions,this),this.task_done=n(this.task_done,this),this.task_init=n(this.task_init,this),this.progress_report=n(this.progress_report,this),this.detail=n(this.detail,this),e.__super__.constructor.apply(this,arguments),this.render(),this.schema.bind("progress",this.progress_report)}return a(e,t),e.prototype.elements={".modal":"modal",".txt":"menu_text",".actions .input-group":"actions",".action.create-index .input-group-btn":"create_index_btn",".action.remove-index .input-group-btn":"remove_index_btn",".action.remove-property .input-group-btn":"remove_property_btn",".action.remove-index input":"remove_index_property_field",".action.remove-property input":"remove_property_field",".task-progress":"progress_container",".task-progress .progress-report":"progress",".task-progress .empty":"noprogress",".progress-report .btn-dump":"btn_dump",".progress-report .progress-bar":"progress_bar",".progress-report .progress-bar span":"progress_text",".progress-report .title":"task_title",".progress-report .status":"task_status",".progress-report .errors":"task_errors",".progress-report .objects":"task_objects",".progress-report .time-elapsed":"task_time_elapsed",".progress-report .time-left":"task_time_left",".task-control .btn-play":"btn_play",".task-control .btn-stop":"btn_stop",".task-control .btn-pause":"btn_pause"},e.prototype.events={"click .function":"detail","click .action.create-index .dropdown-menu a":"select_field_to_create_index","click .action.create-index .input-group-btn":"create_index","click .action.remove-index .input-group-btn":"remove_index","click .action.remove-property .input-group-btn":"remove_property","click .progress-report .btn-dump":"task_dump","click .task-control .btn-play":"task_resume","click .task-control .btn-stop":"task_stop","click .task-control .btn-pause":"task_pause"},e.prototype.detail=function(t){var e;return e=$(t.target),this.modal.find(".modal-title").html(e.data("title")),this.modal.find(".content").html(e.data("content")),this.modal.modal("show")},e.prototype.progress_report=function(t,e){var r,s;return this.task_initialized||this.task_init(),null!=e.progress?(100===e.progress?(s="DONE",this.task_done()):s=""+e.progress+"%",r=e.status,"paused"===r&&(r='<font style="color: #d64e28">'+e.status+"</font>"),100===e.progress&&(r="DONE"),this.task_status.html(r),this.task_objects.html(""+e.current+"/"+e.objects),this.task_errors.html(""+e.errors.length),this.task_time_elapsed.html(this.duration(e.time_elapsed)),this.task_time_left.html(this.duration(e.time_estimated-e.time_elapsed)),this.progress_bar.css("width",""+e.progress+"%"),this.progress_text.html(""+s)):void 0},e.prototype.task_init=function(){return this.task_initialized?void 0:(this.btn_dump.attr("disabled",!1),this.btn_play.attr("disabled",!1),this.btn_stop.attr("disabled",!1),this.btn_pause.attr("disabled",!1),this.task_title.html(this.schema.task.title),this.task_status.html(this.schema.task.status),this.task_objects.html(""+this.schema.task.current+"/"+this.schema.task.objects),this.task_time_elapsed.html(this.duration(0)),this.task_time_left.html(this.duration(null)),this.noprogress.css("display","none"),this.progress.css("display","block"),this.disable_actions(),this.task_initialized=!0)},e.prototype.task_done=function(){return this.btn_dump.attr("disabled","disabled"),this.btn_play.attr("disabled","disabled"),this.btn_stop.attr("disabled","disabled"),this.btn_pause.attr("disabled","disabled"),this.enable_actions(),this.task_initialized=!0},e.prototype.disable_actions=function(){return this.actions.find(".btn").attr("disabled","disabled"),this.actions.find("input").attr("disabled","disabled")},e.prototype.enable_actions=function(){return this.actions.find(".btn").attr("disabled",!1),this.actions.find("input").attr("disabled",!1)},e.prototype.select_field_to_create_index=function(t){return this.selected_field=$(t.target).html(),this.menu_text=this.el.find(".txt"),this.menu_text.html("Index on "+this.selected_field)},e.prototype.create_index=function(){return!this.create_index_btn.attr("disabled")&&this.selected_field?($.getJSON(""+base_uri+"/create_index/"+this.schema.name+"/"+this.selected_field,function(t){return function(e){return t.schema.task=e,t.task_init()}}(this)),this.selected_field=null,this.menu_text="Select property"):void 0},e.prototype.remove_index=function(){return!this.remove_index_btn.attr("disabled")&&this.remove_index_property_field.val()?($.getJSON(""+base_uri+"/remove_index/"+this.schema.name+"/"+this.remove_index_property_field.val(),function(t){return function(e){return t.schema.task=e,t.task_init()}}(this)),this.remove_index_property_field.val("")):void 0},e.prototype.remove_property=function(){return!this.remove_property_btn.attr("disabled")&&this.remove_property_field.val()?($.getJSON(""+base_uri+"/remove_property/"+this.schema.name+"/"+this.remove_property_field.val(),function(t){return function(e){return t.schema.task=e,t.task_init()}}(this)),this.remove_property_field.val("")):void 0},e.prototype.task_resume=function(){return!this.btn_play.attr("disabled")&&this.schema.task.id?$.getJSON(""+base_uri+"/task/resume/"+this.schema.task.id,function(t){return function(){return t.noprogress.css("display","none"),t.progress.css("display","block"),t.progress_container.removeClass("paused"),t.btn_play.css("display","none"),t.btn_pause.css("display","inline-block"),t.btn_stop.css("display","inline-block"),t.disable_actions()}}(this)):void 0},e.prototype.task_stop=function(){return!this.btn_stop.attr("disabled")&&this.schema.task.id?$.getJSON(""+base_uri+"/task/stop/"+this.schema.task.id,function(t){return function(){return t.progress.css("display","none"),t.noprogress.css("display","block"),t.progress_container.removeClass("paused"),t.btn_play.css("display","none"),t.btn_pause.css("display","inline-block"),t.btn_stop.css("display","inline-block"),t.task_done()}}(this)):void 0},e.prototype.task_pause=function(){return!this.btn_pause.attr("disabled")&&this.schema.task.id?$.getJSON(""+base_uri+"/task/pause/"+this.schema.task.id,function(t){return function(){return t.noprogress.css("display","none"),t.progress.css("display","block"),t.task_status.html("paused"),t.progress_container.addClass("paused"),t.btn_pause.css("display","none"),t.btn_play.css("display","inline-block"),t.btn_stop.css("display","inline-block"),t.enable_actions()}}(this)):void 0},e.prototype.task_dump=function(){var t;if(!this.btn_dump.attr("disabled")&&this.schema.task.id)return t=window.open(""+base_uri+"/task/dump/"+this.schema.task.id),t.document.title="Task Dump - "+this.schema.task.id},e.prototype.duration=function(t){var e,r,s,i,n;return t=parseInt(t),t>0?(r="",t=Math.floor(t/1e3),e=Math.floor(t/86400),t-=86400*e,s=Math.floor(t/3600),t-=3600*s,i=Math.floor(t/60),t-=60*i,n=t%60,1===s.toString().length&&(s="0"+s),1===i.toString().length&&(i="0"+i),1===n.toString().length&&(n="0"+n),e>0&&(r+=""+e+":"),r+=""+s+":"+i+":"+n):"--:--:--"},e.prototype.render=function(){return this.html(this.template("schema")({schema:this.schema,duration:this.duration})),this.schema.task.id&&(this.task_init(),this.progress_report(this.schema,this.schema.task.progress),"paused"===this.schema.task.status&&this.task_pause()),this},e}(Spine.Controller),r.exports=s}),require.register("routes/schemas",function(t,e,r){var s,i,n,o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,c=function(t,e){function r(){this.constructor=t}for(var s in e)a.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("../models/schema"),n=e("./schema"),s=function(t){function e(){this.render=o(this.render,this),this.createSchemas=o(this.createSchemas,this),e.__super__.constructor.apply(this,arguments),this.render(),i.bind("refresh",this.createSchemas)}return c(e,t),e.prototype.elements={".schema-view":"schema_view",".page-header":"title"},e.prototype.configure=function(t){return this.model=t,this.stack.swap.scene="schema",this.title.html(this.model),i.fetch({url:""+base_uri+"/schema/"+this.model}),this.active()},e.prototype.createSchemas=function(t){var e;if("schema"===this.stack.swap.scene)return this.schema=t[0],e=new n({schema:this.schema}),this.schema_view.html(e.el)},e.prototype.render=function(){return this.replace(this.template("schema_scene")()),this},e}(Spine.Controller),r.exports=s}),require.register("routes/sidebar",function(t,e,r){var s,i,n=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var s in e)o.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=e("../models/schema"),i=function(t){function r(){this.render=n(this.render,this),this.createList=n(this.createList,this),this.updateCount=n(this.updateCount,this),r.__super__.constructor.apply(this,arguments),this.subview=e("./sidebar_list"),this.render(),s.bind("refresh",this.updateCount)}return a(r,t),r.prototype.className="sidebar",r.prototype.elements={".model-list":"model_list",".collection-list":"collection_list"},r.prototype.updateCount=function(t){var e,r,s,i;for(i=[],r=0,s=t.length;s>r;r++)e=t[r],$(".count-"+e.name).html(e.count),window.count[e.name]=e.count,document.getElementById("count-"+e.name)?(document.getElementById("count-"+e.name).innerHTML=e.count,i.push(window.models[e.name]=e)):i.push(this.createList(e));return i},r.prototype.createList=function(t){var e,r,s,i,n,o,a,c,p,h,d;if(p=new this.subview({schema:t}),t.collection)for(s=t.name.split(":collection:"),i="",c=[],r=1,e=h=0,d=s.length;d>=h&&s[e];e=h+=2)c.push(s[e]),0===$(".collection-"+i).length?(n=$("<div/>").addClass("collection-"+c.join("-")),n.css("padding-left",""+r+"em"),o=$("<h6/>").addClass("collection-title-"+c.join("-")).html(c.join(":")),a=$("<ul/>").addClass("sub nav collection-list-"+c.join("-")),a.append(p.el),n.append(o,a),this.collection_list.append(n)):$(".collection-list-"+c.join("-")).append(p.el),r=2*r;else this.model_list.append(p.el);return $("#page-wrapper").height($(".navbar-static-side").height()+60)},r.prototype.render=function(){var t,e,r;this.html(this.template("sidebar")()),r=window.models;for(t in r)e=r[t],this.createList(e);return this},r}(Spine.Controller),r.exports=i}),require.register("routes/sidebar_list",function(t,e,r){var s,i=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s=function(t){function e(t){var r;this.schema=t.schema,this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),r=this.schema.name.split(":collection:"),this.title=r.pop(),this.render()}return o(e,t),e.prototype.render=function(){return this.replace(this.template("sidebar_list")({name:this.schema.name,title:this.title,collection:this.schema.collection,count:this.schema.count})),this},e}(Spine.Controller),r.exports=s});